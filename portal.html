<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .theme-default { --bg: #f8fafc; --card: #ffffff; }
        .theme-christmas { --bg: #fef2f2; --card: #ffffff; }
        body { background-color: var(--bg); transition: 0.3s; font-family: sans-serif; }
    </style>
</head>
<body class="p-6 md:p-12">
    <div id="app" class="max-w-4xl mx-auto">
        <div class="flex justify-between items-center mb-10">
            <div>
                <h1 id="userName" class="text-3xl font-black text-slate-800">è¼‰å…¥ä¸­...</h1>
                <p id="userRole" class="text-sm text-blue-600 font-bold mt-1"></p>
            </div>
            <button onclick="logout()" class="bg-gray-200 text-gray-600 px-4 py-2 rounded-lg text-sm font-bold">ç™»å‡ºç³»çµ±</button>
        </div>

        <div id="announce-bar" class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8 text-yellow-800 text-sm hidden rounded-r-xl"></div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <button onclick="location.href='stamina.html'" class="bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl transition text-left border-b-8 border-blue-500">
                <span class="text-4xl">âš¡</span><h3 class="font-bold mt-4 text-xl">é«”åŠ›ç´€éŒ„</h3>
                <p class="text-gray-400 text-xs mt-2">å„é¡æ´»å‹•å›é«”è¨ˆç®—</p>
            </button>
            <button onclick="location.href='flipping.html'" class="bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl transition text-left border-b-8 border-red-500">
                <span class="text-4xl">ğŸƒ</span><h3 class="font-bold mt-4 text-xl">ç¿»ç‰Œå·¥å…·</h3>
                <p class="text-gray-400 text-xs mt-2">ç¿»ç‰Œæ©Ÿç‡èˆ‡è·¯å¾‘è¨˜éŒ„</p>
            </button>
            <button onclick="location.href='voyage.html'" class="bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl transition text-left border-b-8 border-amber-500">
                <span class="text-4xl">ğŸš¢</span><h3 class="font-bold mt-4 text-xl">å‰å¤§èˆªç·š</h3>
                <p class="text-gray-400 text-xs mt-2">èˆªç·šè·¯å¾‘èˆ‡è³‡æºè¦åŠƒ</p>
            </button>
        </div>

        <div id="adminPanel" class="hidden mt-12 p-8 bg-slate-900 rounded-3xl text-white shadow-2xl">
            <h2 class="text-indigo-400 font-bold mb-4 tracking-widest uppercase text-sm">ç®¡ç†å“¡æ§åˆ¶å°</h2>
            <div class="flex flex-wrap gap-4">
                <button class="bg-indigo-600 px-6 py-2 rounded-xl text-sm font-bold hover:bg-indigo-500 transition">ä¿®æ”¹æ´»å‹•é…ç½®</button>
                <button id="superAdminBtn" class="hidden bg-amber-600 px-6 py-2 rounded-xl text-sm font-bold hover:bg-amber-500 transition">æ¬Šé™äººå“¡ç®¡ç†</button>
            </div>
        </div>
    </div>

    <script>
        window.onload = function() {
            const sessionRaw = sessionStorage.getItem('gameData');
            if(!sessionRaw) {
                location.href = "index.html";
                return;
            }
            const data = JSON.parse(sessionRaw);
            
            // å¥—ç”¨ä½ˆæ™¯ä¸»é¡Œ
            document.body.className = "theme-" + (data.config.CurrentTheme || 'default');
            
            // é¡¯ç¤ºå€‹äººè³‡è¨Š
            document.getElementById('userName').innerText = "æ‚¨å¥½, " + data.user.name;
            document.getElementById('userRole').innerText = "ç•¶å‰æ¬Šé™ï¼š" + (data.user.role === 'Admin' || data.user.role === 'SuperAdmin' ? 'ç®¡ç†å“¡' : 'ä¸€èˆ¬ä½¿ç”¨è€…');
            
            // é¡¯ç¤ºå…¬å‘Š
            if(data.config.AnnounceText) {
                const bar = document.getElementById('announce-bar');
                bar.innerText = "ğŸ“¢ å…¬å‘Šï¼š" + data.config.AnnounceText;
                bar.classList.remove('hidden');
            }

            // åˆ¤æ–·æ¬Šé™åˆ†ç´š
            if(data.user.level >= 10) {
                document.getElementById('adminPanel').classList.remove('hidden');
                if(data.user.level === 99) {
                    document.getElementById('superAdminBtn').classList.remove('hidden');
                }
            }
        };

        function logout() {
            sessionStorage.clear();
            location.href = "index.html";
        }
    </script>
</body>
</html>